<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>[è¯‘]åŸå§‹WebGPU - Raw WebGPU - Boiao Ch</title><meta name="Description" content="Keep Focus!"><meta property="og:title" content="[è¯‘]åŸå§‹WebGPU - Raw WebGPU" />
<meta property="og:description" content="ä½œè€…ï¼š &#8201;Alain Galvan ä¸€ä»½å¦‚ä½•ç¼–å†™ WebGPU åº”ç”¨ç¨‹åºçš„æ¦‚è¿°ï¼Œ å­¦ä¹  WebGPU åœ¨ç»˜åˆ¶ä¸­æ‰€éœ€çš„å…³é”®æ•°æ®ç»“æ„å’Œç±»å‹ã€‚ Github Repo | Codepen WebGPU æ˜¯ä¸€ç§ç”¨äº Web çš„æ–°çš„å›¾å½¢ APIï¼Œå®ƒéµå¾ªç°ä»£è®¡ç®—å›¾å½¢ API" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://liaobinbin.com/posts/raw-webgpu/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-01T16:24:09+08:00" />
<meta property="article:modified_time" content="2023-12-01T16:24:09+08:00" /><meta property="og:site_name" content="Boiao Ch" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="[è¯‘]åŸå§‹WebGPU - Raw WebGPU"/>
<meta name="twitter:description" content="ä½œè€…ï¼š &#8201;Alain Galvan ä¸€ä»½å¦‚ä½•ç¼–å†™ WebGPU åº”ç”¨ç¨‹åºçš„æ¦‚è¿°ï¼Œ å­¦ä¹  WebGPU åœ¨ç»˜åˆ¶ä¸­æ‰€éœ€çš„å…³é”®æ•°æ®ç»“æ„å’Œç±»å‹ã€‚ Github Repo | Codepen WebGPU æ˜¯ä¸€ç§ç”¨äº Web çš„æ–°çš„å›¾å½¢ APIï¼Œå®ƒéµå¾ªç°ä»£è®¡ç®—å›¾å½¢ API"/>
<meta name="twitter:site" content="@liaobinbin"/>
<meta name="application-name" content="Boiao Ch&#39;s Blog">
<meta name="apple-mobile-web-app-title" content="Boiao Ch&#39;s Blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.6.0/lxgwwenkaiscreen.css" rel="stylesheet" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://liaobinbin.com/posts/raw-webgpu/" /><link rel="prev" href="https://liaobinbin.com/posts/awesome-wm-virtualbox-full-screen/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "[è¯‘]åŸå§‹WebGPU - Raw WebGPU",
        "inLanguage": "zh-cn",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/liaobinbin.com\/posts\/raw-webgpu\/"
        },"genre": "posts","keywords": "webgpu, frontend, rust, wgsl","wordcount":  4797 ,
        "url": "https:\/\/liaobinbin.com\/posts\/raw-webgpu\/","datePublished": "2023-12-01T16:24:09+08:00","dateModified": "2023-12-01T16:24:09+08:00","license": "\u0026copy; \u003ca href=\"https://liaobinbin.com\"\u003e Boiao Ch\u003c/a\u003e 2008 - 2018","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Boiao Ch"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Boiao Ch"><span id="id-8" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ–‡ç«  </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><a class="menu-item" href="/about/"> å…³äº </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Boiao Ch"><span id="id-9" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><a class="menu-item" href="/about/" title="">å…³äº</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">[è¯‘]åŸå§‹WebGPU - Raw WebGPU</h1><div class="post-meta">
            <div class="post-meta-line"><time datetime="2023-12-01">2023-12-01</time>&nbsp;&nbsp;<span class="post-category"><a href="/categories/%E5%89%8D%E7%AB%AF/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>å‰ç«¯</a></span>&nbsp;&nbsp;<span id="/posts/raw-webgpu/" class="leancloud_visitors" data-flag-title="[è¯‘]åŸå§‹WebGPU - Raw WebGPU">
                        <i class="far fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;æ¬¡å›´è§‚
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#è®¾å®š">è®¾å®š</a></li>
    <li><a href="#é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</a>
      <ul>
        <li><a href="#ä¾èµ–">ä¾èµ–</a></li>
      </ul>
    </li>
    <li><a href="#æ¦‚è¿°">æ¦‚è¿°</a></li>
    <li><a href="#åˆå§‹åŒ–-api">åˆå§‹åŒ– API</a>
      <ul>
        <li><a href="#å…¥å£">å…¥å£</a></li>
        <li><a href="#é€‚é…å™¨">é€‚é…å™¨</a></li>
        <li><a href="#è®¾å¤‡">è®¾å¤‡</a></li>
        <li><a href="#é˜Ÿåˆ—">é˜Ÿåˆ—</a></li>
      </ul>
    </li>
    <li><a href="#å¸§æ”¯æŒ">å¸§æ”¯æŒ</a>
      <ul>
        <li><a href="#canvas-ä¸Šä¸‹æ–‡">Canvas ä¸Šä¸‹æ–‡</a></li>
        <li><a href="#å¸§ç¼“å†²é™„ä»¶">å¸§ç¼“å†²é™„ä»¶</a></li>
      </ul>
    </li>
    <li><a href="#åˆå§‹åŒ–èµ„æº">åˆå§‹åŒ–èµ„æº</a>
      <ul>
        <li><a href="#é¡¶ç‚¹å’Œç´¢å¼•ç¼“å†²åŒº">é¡¶ç‚¹å’Œç´¢å¼•ç¼“å†²åŒº</a></li>
        <li><a href="#ç€è‰²å™¨">ç€è‰²å™¨</a></li>
        <li><a href="#ç€è‰²å™¨æ¨¡å—">ç€è‰²å™¨æ¨¡å—</a></li>
        <li><a href="#uniform-ç¼“å†²åŒº">Uniform ç¼“å†²åŒº</a></li>
        <li><a href="#ç®¡çº¿å¸ƒå±€">ç®¡çº¿å¸ƒå±€</a></li>
        <li><a href="#å›¾å½¢ç®¡çº¿">å›¾å½¢ç®¡çº¿</a></li>
        <li><a href="#æŒ‡ä»¤ç¼–ç å™¨">æŒ‡ä»¤ç¼–ç å™¨</a></li>
      </ul>
    </li>
    <li><a href="#æ¸²æŸ“">æ¸²æŸ“</a></li>
    <li><a href="#ç»“æŸè¯­">ç»“æŸè¯­</a>
      <ul>
        <li><a href="#å…¶ä»–èµ„æº">å…¶ä»–èµ„æº</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>ä½œè€…ï¼š <span class="h-card person-mention"><a href="https://alain.xyz" class="u-url url"><img class="u-photo photo" src="https://alain.xyz/assets/brand/alaingalvan0.jpg" alt="Alain Galvan">&#8201;<span class="p-name fn">Alain Galvan</span></a></span></p>
<p><em>ä¸€ä»½å¦‚ä½•ç¼–å†™ WebGPU åº”ç”¨ç¨‹åºçš„æ¦‚è¿°ï¼Œ å­¦ä¹  WebGPU åœ¨ç»˜åˆ¶ä¸­æ‰€éœ€çš„å…³é”®æ•°æ®ç»“æ„å’Œç±»å‹ã€‚</em></p>
<data id="id-1" data-raw></data>
<div id="id-2"><a href="https://github.com/alaingalvan/webgpu-seed" target="_blank" rel="noopener noreffer ">Github Repo</a> |
<a href="https://codepen.io/alaingalvan/pen/GRgvLGw" target="_blank" rel="noopener noreffer ">Codepen</a></div>
<data id="id-3" data-raw></data>
<p>WebGPU æ˜¯ä¸€ç§ç”¨äº Web çš„æ–°çš„å›¾å½¢ APIï¼Œå®ƒéµå¾ªç°ä»£è®¡ç®—å›¾å½¢ API (ä¾‹å¦‚ Mircrosoft DirectX 12ã€ Vulkan å’Œ Apple Metal) çš„æ¡†æ¶ã€‚ Web å›¾å½¢ API çš„è¿™ç§èŒƒå¼è½¬å˜ä½¿ç”¨æˆ·èƒ½å¤Ÿäº«å—ä¸æœ¬æœºåŸç”Ÿå›¾å½¢ API ç›¸åŒçš„å¥½å¤„ï¼š æ›´å¿«çš„åº”ç”¨ç¨‹åºå½’åŠŸäºå……åˆ†åˆ©ç”¨ GPUï¼Œæ›´å°‘çš„ç‰¹å®šå›¾å½¢é©±åŠ¨ç¨‹åºé”™è¯¯ï¼ŒåŸºäºæœªæ¥å®ç°æ–°åŠŸèƒ½çš„æ½œåŠ›ã€‚</p>
<p>WebGPU å¯èƒ½æ˜¯ Web ä¸Šæ‰€æœ‰æ¸²æŸ“ API ä¸­æœ€å¤æ‚çš„ï¼Œå°½ç®¡è¿™ç§å¤æ‚æ€§å¯ä»¥é€šè¿‡ API æä¾›çš„æ€§èƒ½æç¤ºå’Œæœªæ¥æ”¯æŒçš„ä¿è¯æ¥æŠµæ¶ˆã€‚æœ¬æ–‡æ—¨åœ¨æ­ç§˜è¯¥ APIï¼Œä½¿å…¶æ›´å®¹æ˜“ç†è§£ä½¿ç”¨è¯¥ API ç¼–å†™ Web åº”ç”¨ç¨‹åºã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š æœ¬æ–‡åŸºäº 2023 å¹´ 5 æœˆ 11 æ—¥çš„ WebGPU APIï¼Œå¦‚æœæœ‰ä»»ä½•å˜åŒ–ï¼Œè¯·åœ¨åŸæ–‡è¯„è®ºåŒºæˆ–è€… Twitter ä¸Šå‘Šè¯‰ä½œè€…ï¼Œä½œè€…ä¼šå°½å¿«æ›´æ–°ã€‚
(ä¹Ÿå¯ä»¥åœ¨æœ¬è¯„è®ºåŒºç•™è¨€ï¼Œæˆ–è€…è”ç³»è¯‘è€…ï¼Œè¯‘è€…å°†ä¼šä»£ä¸ºè”ç³»ä½œè€…)</p>
</blockquote>
<hr>
<p>ä½œè€…å·²ç»å‡†å¤‡äº†ä¸€ä¸ª <a href="https://github.com/alaingalvan/webgpu-seed" target="_blank" rel="noopener noreffer ">Github</a> ä»“åº“ï¼Œé‡Œé¢åŒ…å«äº†ä½ å¼€å§‹çš„æ‰€æœ‰æ‰€éœ€å†…å®¹ã€‚æˆ‘ä»¬å°†ä¸€èµ·ç¼–å†™ä½¿ç”¨ <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreffer ">Typescript</a> ç¼–å†™çš„ WebGPU Hello Triangle åº”ç”¨ã€‚</p>
<blockquote>
<p>è¯·æŸ¥çœ‹ä½œè€…åœ¨ WebGL ä¸Šçš„å¦ä¸€ç¯‡åšæ–‡ï¼Œè¯¥æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ä¸€ç§è¾ƒæ—§ä½†å¹¿æ³›æ”¯æŒçš„ Web å›¾å½¢ API æ¥ç¼–å†™å›¾å½¢åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<h2 id="è®¾å®š">è®¾å®š</h2>
<p>WebGPU åœ¨å¹¿æ³›çš„å¹³å°ä¸Šå¾—åˆ°æ”¯æŒï¼š</p>
<ul>
<li><a href="https://www.google.com/chrome/canary/" target="_blank" rel="noopener noreffer ">Google Chrome</a>ï¼š WebGPU åœ¨ Chrome 113 ä¸­å¯ç”¨ï¼Œå¹¶ä¸”ç›®å‰ä½œä¸ºåˆå§‹è¯•ç”¨ç‰ˆæœ¬æä¾›ã€‚ç›®å‰ï¼ŒChrome Canary çš„ Android ç‰ˆä¸æ”¯æŒ WebGPUã€‚</li>
<li><a href="https://www.mozilla.org/en-US/firefox/channel/desktop/" target="_blank" rel="noopener noreffer ">Mozilla Firefox</a>ï¼š ä½ å¿…é¡»ä½¿ç”¨ Nightly ç‰ˆï¼ŒFirefox Nightly çš„ Android ç‰ˆæ”¯æŒ WebGPUã€‚</li>
<li><a href="https://www.microsoftedgeinsider.com/en-us/download" target="_blank" rel="noopener noreffer ">Microsoft Edge</a>ï¼š ç›®å‰å¯ä»¥é€šè¿‡ Canary ç‰ˆæœ¬ä½¿ç”¨ï¼Œä½†å…¶åŠŸèƒ½ä¸ Chrome ç›¸åŒã€‚</li>
<li>Apple Safariï¼š Safari å›¢é˜Ÿç›®å‰æ­£åœ¨è‡´åŠ›äºæ¡Œé¢ç«¯æ”¯æŒ WebGPUï¼Œä½†å°±ç›®å‰è€Œè¨€ï¼Œç§»åŠ¨ç«¯è¿˜æ²¡æœ‰æ¶ˆæ¯ã€‚</li>
</ul>
<p>å½“ä½ æ‹¥æœ‰äº†æ”¯æŒ WebGPU çš„æµè§ˆå™¨åå®‰è£…ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ä»»ä½•ç°ä»£æµè§ˆå™¨çš„ alpha ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š
<ul>
<li>Chrome æˆ–è€…ä»»ä½• åŸºäº Chromium çš„æµè§ˆå™¨çš„ Canary ç‰ˆæœ¬ï¼Œ ç„¶åè®¿é—® <code>about:flags</code> å»å¯ç”¨ <code>unsafe-webgpu</code> ã€‚</li>
<li>FireFoxï¼Œè®¿é—® <code>about:config</code> å»å¯ç”¨ <code>dom.webgpu.enabled</code>ã€‚</li>
</ul>
</li>
<li><a href="https://git-scm.com/" target="_blank" rel="noopener noreffer ">Git</a></li>
<li><a href="https://nodejs.org/en/" target="_blank" rel="noopener noreffer ">Node.js</a></li>
<li>ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¾‹å¦‚ï¼š <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreffer ">Visual Studio Code</a>ã€<a href="https://www.vim.org/" target="_blank" rel="noopener noreffer ">Vim</a>ã€<a href="https://www.gnu.org/software/emacs/" target="_blank" rel="noopener noreffer ">Emacs</a></li>
</ul>
<p>ç„¶ååœ¨ä»»æ„ç»ˆç«¯å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼Œä¾‹å¦‚ <a href="https://code.visualstudio.com/docs/editor/integrated-terminal" target="_blank" rel="noopener noreffer ">VS Code&rsquo;s å†…ç½®ç»ˆç«¯</a>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ğŸ‘ å…‹éš†è¯¥ä»“åº“</span>
</span></span><span class="line"><span class="cl">git clone https://github.com/alaingalvan/webgpu-seed
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ğŸ’¿ è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ </span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> webgpu-seed
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ğŸ”¨ å¯åŠ¨æ„å»ºé¡¹ç›® </span>
</span></span><span class="line"><span class="cl">npm start
</span></span></code></pre></div><blockquote>
<p>å¼•ç”¨ä¸€ä¸ªæ–‡ç« ä»‹ç»node.jsï¼Œ packages</p>
</blockquote>
<h2 id="é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">â”œâ”€ ğŸ“‚ node_modules/   <span class="c1"># ğŸ‘¶ ä¾èµ–</span>
</span></span><span class="line"><span class="cl">â”‚  â”œâ”€ ğŸ“ gl-matrix      <span class="c1"># â• çº¿æ€§ä»£æ•° </span>
</span></span><span class="line"><span class="cl">â”‚  â””â”€ ğŸ“ ...            <span class="c1"># ğŸ•š å…¶ä»–ä¾èµ– (TypeScript, Webpack, etc.)</span>
</span></span><span class="line"><span class="cl">â”œâ”€ ğŸ“‚ src/            <span class="c1"># ğŸŒŸ æºæ–‡ä»¶ </span>
</span></span><span class="line"><span class="cl">â”‚  â”œâ”€ ğŸ“„ renderer.ts    <span class="c1"># ğŸ”º ä¸‰è§’å½¢æ¸²æŸ“å™¨ </span>
</span></span><span class="line"><span class="cl">â”‚  â””â”€ ğŸ“„ main.ts        <span class="c1"># ğŸ åº”ç”¨ç¨‹åºä¸»å…¥å£ </span>
</span></span><span class="line"><span class="cl">â”œâ”€ ğŸ“„ .gitignore      <span class="c1"># ğŸ‘ï¸ åœ¨ Git ä»“åº“ä¸­å¿½ç•¥ç‰¹å®šçš„æ–‡ä»¶ </span>
</span></span><span class="line"><span class="cl">â”œâ”€ ğŸ“„ package.json    <span class="c1"># ğŸ“¦ Node åŒ…é…ç½®æ–‡ä»¶ </span>
</span></span><span class="line"><span class="cl">â”œâ”€ ğŸ“„ license.md      <span class="c1"># âš–ï¸ ä½ çš„ License (Unlicense)</span>
</span></span><span class="line"><span class="cl">â””â”€ ğŸ“ƒreadme.md        <span class="c1"># ğŸ“– è¯·é˜…è¯»å®ƒ! </span>
</span></span></code></pre></div><h3 id="ä¾èµ–">ä¾èµ–</h3>
<ul>
<li><a href="https://github.com/toji/gl-matrix" target="_blank" rel="noopener noreffer ">gl-matrix</a> - ä¸€ä¸ª JavaScript åº“ï¼Œå…è®¸ç”¨æˆ·åƒç¼–å†™ JavaScript ä»£ç ä¸€æ ·ç¼–å†™ <code>glsl</code>ï¼ŒåŒ…æ‹¬å‘é‡ã€çŸ©é˜µç­‰ç±»å‹ã€‚è™½ç„¶åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­æ²¡æœ‰ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒå¯¹äºç¼–å†™æ›´é«˜çº§çš„<strong><ruby>å†…å®¹<rt>ä¾‹å¦‚ç›¸æœºçŸ©é˜µ</rt></ruby></strong>éå¸¸æœ‰ç”¨ã€‚</li>
<li>TypeScript - å¸¦æœ‰ç±»å‹çš„ JavaScriptï¼Œé€šè¿‡å®æ—¶è‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€æŸ¥ä½¿å¾—ç¼–å†™ Web åº”ç”¨ç¨‹åºå˜å¾—éå¸¸å®¹æ˜“ã€‚</li>
<li>Webpack - ä¸€ä¸ªJavaScript ç¼–è¯‘å·¥å…·ï¼Œç”¨äºæ„å»ºæœ€å°åŒ–çš„è¾“å‡ºå’Œæ›´å¿«åœ°æµ‹è¯•æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚</li>
</ul>
<h2 id="æ¦‚è¿°">æ¦‚è¿°</h2>
<p>åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­æˆ‘ä»¬å°†è¦åšä»¥ä¸‹å‡ ä»¶äº‹ï¼š</p>
<ol>
<li><strong>åˆå§‹åŒ– API</strong> - æ£€æŸ¥<code>Navigator.gpu</code>æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è¯·æ±‚ä¸€ä¸ª <code>GPUAdapter</code>ï¼Œ ç„¶åè¯·æ±‚ä¸€ä¸ª <code>GPUDevice</code>ï¼Œå¹¶è·å–è¯¥è®¾å¤‡çš„é»˜è®¤ <code>GPUQueue</code>ã€‚</li>
<li><strong>è®¾ç½®å¸§æ”¯æŒ</strong> - åˆ›å»ºä¸€ä¸ª<code>GPUCanvasContext</code>å¹¶å°†å…¶é…ç½®ä¸ºæ¥æ”¶å½“å‰å¸§çš„<code>GPUTexture</code>ï¼Œä»¥åŠæ‚¨å¯èƒ½éœ€è¦çš„ä»»ä½•å…¶ä»–é™„ä»¶(ä¾‹å¦‚æ·±åº¦æ¨¡æ¿çº¹ç†ç­‰)ã€‚ä¸ºè¿™äº›çº¹ç†åˆ›å»º<code>GPUTextureView</code>ã€‚</li>
<li><strong>åˆå§‹åŒ–èµ„æº</strong> - åˆ›å»ºæ‚¨çš„é¡¶ç‚¹å’Œç´¢å¼• <code>GPUBuffers</code>ï¼Œ å°† <strong><ruby>WebGPU Shading Language<rt>WGSL</rt></ruby></strong> ç€è‰²å™¨åŠ è½½ä¸º<code>GPUShaderModules</code>ï¼Œé€šè¿‡æè¿°å›¾å½¢ç®¡çº¿çš„æ¯ä¸ªé˜¶æ®µåˆ›å»º<code>GPURenderPipeline</code>ã€‚æœ€åï¼Œä½¿ç”¨æ‚¨æ‰“ç®—è¿è¡Œçš„æ¸²æŸ“é€šé“æ„å»º<code>GPUCommandEncoder</code>ï¼Œç„¶åä½¿ç”¨æ¸²æŸ“é€šé“æ‰§è¡Œæ‰€æœ‰çš„ç»˜å›¾è°ƒç”¨æ„å»º<code>GPURenderPassEncoder</code>ã€‚</li>
<li><strong>æ¸²æŸ“</strong> - é€šè¿‡è°ƒç”¨ <code>.finish()</code> æäº¤æ‚¨çš„ <code>GPUCommandEncoder</code> åˆ° <code>GPUQueue</code>ã€‚é€šè¿‡è°ƒç”¨<code>requestAnimationFrame</code> åˆ·æ–°ä½ ç”»å¸ƒä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>é”€æ¯</strong> - åœ¨ä½¿ç”¨ API å®Œæˆåé”€æ¯æ‰€æœ‰æ•°æ®ç»“æ„ã€‚</li>
</ol>
<h2 id="åˆå§‹åŒ–-api">åˆå§‹åŒ– API</h2>
<h3 id="å…¥å£">å…¥å£</h3>
<p><figure><a class="lightgallery" href="./os-window.svg" title="Entry Point Diagram" data-thumbnail="./os-window.svg" data-sub-html="<h2>Hello Triangle</h2><p>Entry Point Diagram</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./os-window.svg"
            data-srcset="./os-window.svg, ./os-window.svg 1.5x, ./os-window.svg 2x"
            data-sizes="auto"
            alt="./os-window.svg" />
    </a><figcaption class="image-caption">Hello Triangle</figcaption>
    </figure></p>
<p>ä¸ºäº†è®¿é—® WebGPU APIï¼Œä½ éœ€è¦æ£€æŸ¥å…¨å±€å˜é‡<code>navigator</code>å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ª<code>gpu</code>å¯¹è±¡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// ğŸ­  WebGPU å…¥å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">entry</span>: <span class="kt">GPU</span> <span class="o">=</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">gpu</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">entry</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;WebGPU is not supported on this browser.&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="é€‚é…å™¨">é€‚é…å™¨</h3>
<p><figure><a class="lightgallery" href="./adapter.svg" title="Adapter Diagram" data-thumbnail="./adapter.svg" data-sub-html="<h2>é€‚é…å™¨</h2><p>Adapter Diagram</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./adapter.svg"
            data-srcset="./adapter.svg, ./adapter.svg 1.5x, ./adapter.svg 2x"
            data-sizes="auto"
            alt="./adapter.svg" />
    </a><figcaption class="image-caption">é€‚é…å™¨</figcaption>
    </figure></p>
<p><strong>é€‚é…å™¨</strong> æè¿°äº†ç‰¹å®š GPU çš„ç‰©ç†å±æ€§ï¼Œä¾‹å¦‚å®ƒçš„åç§°ã€æ‰©å±•å’Œè®¾å¤‡é™åˆ¶ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰é€‚é…å™¨å¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">adapter</span>: <span class="kt">GPUAdapter</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ™ å†…ç½®çš„å¼‚æ­¥è·å–...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ”Œ ç‰©ç†è®¾å¤‡é€‚é…å™¨ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">adapter</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">requestAdapter</span><span class="p">();</span>
</span></span></code></pre></div><h3 id="è®¾å¤‡">è®¾å¤‡</h3>
<p><figure><a class="lightgallery" href="./device.svg" title="Device" data-thumbnail="./device.svg" data-sub-html="<h2>è®¾å¤‡</h2><p>Device</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./device.svg"
            data-srcset="./device.svg, ./device.svg 1.5x, ./device.svg 2x"
            data-sizes="auto"
            alt="./device.svg" />
    </a><figcaption class="image-caption">è®¾å¤‡</figcaption>
    </figure></p>
<p><strong>è®¾å¤‡</strong>  æ˜¯æ‚¨è®¿é—® WebGPU API çš„æ ¸å¿ƒæ–¹å¼ï¼Œå®ƒå°†å…è®¸æ‚¨åˆ›å»ºæ‰€éœ€çš„æ•°æ®ç»“æ„ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰è®¾å¤‡å¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">device</span>: <span class="kt">GPUDevice</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ™ å†…ç½®çš„å¼‚æ­¥è·å–...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ’» é€»è¾‘è®¾å¤‡ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">device</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">adapter</span><span class="p">.</span><span class="nx">requestDevice</span><span class="p">();</span>
</span></span></code></pre></div><h3 id="é˜Ÿåˆ—">é˜Ÿåˆ—</h3>
<p><figure><a class="lightgallery" href="./queue.svg" title="Queue" data-thumbnail="./queue.svg" data-sub-html="<h2>é˜Ÿåˆ—</h2><p>Queue</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./queue.svg"
            data-srcset="./queue.svg, ./queue.svg 1.5x, ./queue.svg 2x"
            data-sizes="auto"
            alt="./queue.svg" />
    </a><figcaption class="image-caption">é˜Ÿåˆ—</figcaption>
    </figure></p>
<p><strong>é˜Ÿåˆ—</strong> å…è®¸æ‚¨å°†å·¥ä½œå¼‚æ­¥çš„å‘é€åˆ° GPUã€‚åœ¨åŸæ–‡æ’°å†™æ—¶ï¼Œæ‚¨åªèƒ½ä»ç»™å®šçš„ <code>GPUDevice</code> è®¿é—®ä¸€ä¸ªé»˜è®¤çš„é˜Ÿåˆ—ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰é˜Ÿåˆ—å¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">queue</span>: <span class="kt">GPUQueue</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ“¦ è·å–é˜Ÿåˆ—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">queue</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">queue</span><span class="p">;</span>
</span></span></code></pre></div><h2 id="å¸§æ”¯æŒ">å¸§æ”¯æŒ</h2>
<h3 id="canvas-ä¸Šä¸‹æ–‡">Canvas ä¸Šä¸‹æ–‡</h3>
<p><figure><a class="lightgallery" href="./canvas.svg" title="Canvas" data-thumbnail="./canvas.svg" data-sub-html="<h2>Canvas</h2><p>Canvas</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./canvas.svg"
            data-srcset="./canvas.svg, ./canvas.svg 1.5x, ./canvas.svg 2x"
            data-sizes="auto"
            alt="./canvas.svg" />
    </a><figcaption class="image-caption">Canvas</figcaption>
    </figure></p>
<p>ä¸ºäº†çœ‹åˆ°ä½ æ‰€ç»˜åˆ¶çš„å†…å®¹ï¼Œæ‚¨éœ€è¦ä¸€ä¸ª <code>HTMLCanvasElement</code>  <sup>canvas</sup>/<sub>ç”»å¸ƒ</sub> å…ƒç´ ï¼Œ å¹¶ä¸”éœ€è¦ä»è¯¥ç”»å¸ƒè·å¾—ä¸€ä¸ª <strong>Canvas ä¸Šä¸‹æ–‡</strong>ï¼Œ Canvas ä¸Šä¸‹æ–‡ç®¡ç†ä¸€ç³»åˆ—çº¹ç†ï¼Œæ‚¨å°†ä½¿ç”¨è¿™äº›çº¹ç†æ¥å‘ˆç°æœ€ç»ˆçš„æ¸²æŸ“è¾“å‡ºåˆ°ä½ çš„ canvas å…ƒç´ ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰ä¸Šä¸‹æ–‡å¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">context</span>: <span class="kt">GPUCanvasContext</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// âšª åˆ›å»ºä¸Šä¸‹æ–‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">context</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;webgpu&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// â›“ï¸ é…ç½®ä¸Šä¸‹æ–‡ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">canvasConfig</span>: <span class="kt">GPUCanvasConfiguration</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">device</span>: <span class="kt">this.device</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;bgra8unorm&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">usage</span>: <span class="kt">GPUTextureUsage.RENDER_ATTACHMENT</span> <span class="o">|</span> <span class="nx">GPUTextureUsage</span><span class="p">.</span><span class="nx">COPY_SRC</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alphaMode</span><span class="o">:</span> <span class="s1">&#39;opaque&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">context</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="nx">canvasConfig</span><span class="p">);</span>
</span></span></code></pre></div><h3 id="å¸§ç¼“å†²é™„ä»¶">å¸§ç¼“å†²é™„ä»¶</h3>
<p><figure><a class="lightgallery" href="./attachments.svg" title="Attachment" data-thumbnail="./attachments.svg" data-sub-html="<h2>é™„ä»¶</h2><p>Attachment</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./attachments.svg"
            data-srcset="./attachments.svg, ./attachments.svg 1.5x, ./attachments.svg 2x"
            data-sizes="auto"
            alt="./attachments.svg" />
    </a><figcaption class="image-caption">é™„ä»¶</figcaption>
    </figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰é™„ä»¶å¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">depthTexture</span>: <span class="kt">GPUTexture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">depthTextureView</span>: <span class="kt">GPUTextureView</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ¤” åˆ›å»ºæ·±åº¦æ”¯æŒ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">depthTextureDesc</span>: <span class="kt">GPUTextureDescriptor</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">size</span><span class="o">:</span> <span class="p">[</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">dimension</span><span class="o">:</span> <span class="s1">&#39;2d&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;depth24plus-stencil8&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">usage</span>: <span class="kt">GPUTextureUsage.RENDER_ATTACHMENT</span> <span class="o">|</span> <span class="nx">GPUTextureUsage</span><span class="p">.</span><span class="nx">COPY_SRC</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">depthTexture</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createTexture</span><span class="p">(</span><span class="nx">depthTextureDesc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">depthTextureView</span> <span class="o">=</span> <span class="nx">depthTexture</span><span class="p">.</span><span class="nx">createView</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰ Canvas ä¸Šä¸‹æ–‡å›¾åƒå¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">colorTexture</span>: <span class="kt">GPUTexture</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">colorTextureView</span>: <span class="kt">GPUTextureView</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">colorTexture</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getCurrentTexture</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">colorTextureView</span> <span class="o">=</span> <span class="nx">colorTexture</span><span class="p">.</span><span class="nx">createView</span><span class="p">();</span>
</span></span></code></pre></div><h2 id="åˆå§‹åŒ–èµ„æº">åˆå§‹åŒ–èµ„æº</h2>
<h3 id="é¡¶ç‚¹å’Œç´¢å¼•ç¼“å†²åŒº">é¡¶ç‚¹å’Œç´¢å¼•ç¼“å†²åŒº</h3>
<p><figure><a class="lightgallery" href="./buffer.svg" title="Buffer" data-thumbnail="./buffer.svg" data-sub-html="<h2>ç¼“å†²åŒº</h2><p>Buffer</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./buffer.svg"
            data-srcset="./buffer.svg, ./buffer.svg 1.5x, ./buffer.svg 2x"
            data-sizes="auto"
            alt="./buffer.svg" />
    </a><figcaption class="image-caption">ç¼“å†²åŒº</figcaption>
    </figure></p>
<p><strong><strong><ruby>ç¼“å†²åŒº<rt>Buffer</rt></ruby></strong></strong> æ˜¯ä¸€ä¸ªæ•°ç»„æ•°æ®ï¼Œæ¯”å¦‚ç½‘æ ¼çš„ä½ç½®æ•°æ®ã€é¢œè‰²æ•°æ®ã€ç´¢å¼•æ•°æ®ç­‰ã€‚åœ¨åªç”¨åŸºäºå…‰æ …çš„å›¾å½¢ç®¡çº¿æ¸²æŸ“ä¸‰è§’å½¢çš„æ—¶å€™ï¼Œä½ éœ€è¦å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªé¡¶ç‚¹æ•°æ®ç¼“å†²åŒºã€Œé€šå¸¸ç§°ä¸º<strong><ruby>é¡¶ç‚¹ç¼“å†²å¯¹è±¡<rt>VBO</rt></ruby></strong>ã€ï¼Œä»¥åŠä¸€ä¸ªåŒ…å«ä¸è¦ç»˜åˆ¶çš„æ¯ä¸ªä¸‰è§’å½¢é¡¶ç‚¹ç›¸å¯¹åº”çš„ç´¢å¼•çš„ç¼“å†²åŒºã€Œä¹Ÿç§°ä¸º<strong><ruby>ç´¢å¼•ç¼“å†²å¯¹è±¡<rt>IBO</rt></ruby></strong>ã€</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// ğŸ“ˆ ä½ç½®é¡¶ç‚¹ç¼“å†²æ•°æ® 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">positions</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ¨ é¢œè‰²é¡¶ç‚¹ç¼“å†²æ•°æ® 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">colors</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="mf">1.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mf">0.0</span><span class="p">,</span> <span class="c1">// ğŸ”´
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mf">1.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mf">0.0</span><span class="p">,</span> <span class="c1">// ğŸŸ¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mf">0.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mf">1.0</span> <span class="c1">// ğŸ”µ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ“‡ ç´¢å¼•ç¼“å†²æ•°æ® 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint16Array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰ç¼“å†²åŒºå¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">positionBuffer</span>: <span class="kt">GPUBuffer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">colorBuffer</span>: <span class="kt">GPUBuffer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">indexBuffer</span>: <span class="kt">GPUBuffer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ‘‹ è¾…åŠ©å‡½æ•°ä¾¿äºå…¶ä»–ç±»å‹æ•°ç»„è½¬åŒ–ä¸º GPUBuffer(s) 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">createBuffer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">arr</span>: <span class="kt">Float32Array</span> <span class="o">|</span> <span class="nx">Uint16Array</span><span class="p">,</span> <span class="nx">usage</span>: <span class="kt">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ğŸ“ å¯¹é½åˆ° 4 å­—èŠ‚ (æ„Ÿè°¢ @chrimsonite)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">desc</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">size</span><span class="o">:</span> <span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">usage</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">mappedAtCreation</span>: <span class="kt">true</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">buffer</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">(</span><span class="nx">desc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">writeArray</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">        <span class="nx">arr</span> <span class="k">instanceof</span> <span class="nx">Uint16Array</span>
</span></span><span class="line"><span class="cl">            <span class="o">?</span> <span class="k">new</span> <span class="nx">Uint16Array</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">getMappedRange</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">            <span class="o">:</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">getMappedRange</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="nx">writeArray</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="nx">arr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">buffer</span><span class="p">.</span><span class="nx">unmap</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">buffer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">positionBuffer</span> <span class="o">=</span> <span class="nx">createBuffer</span><span class="p">(</span><span class="nx">positions</span><span class="p">,</span> <span class="nx">GPUBufferUsage</span><span class="p">.</span><span class="nx">VERTEX</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">colorBuffer</span> <span class="o">=</span> <span class="nx">createBuffer</span><span class="p">(</span><span class="nx">colors</span><span class="p">,</span> <span class="nx">GPUBufferUsage</span><span class="p">.</span><span class="nx">VERTEX</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">indexBuffer</span> <span class="o">=</span> <span class="nx">createBuffer</span><span class="p">(</span><span class="nx">indices</span><span class="p">,</span> <span class="nx">GPUBufferUsage</span><span class="p">.</span><span class="nx">INDEX</span><span class="p">);</span>
</span></span></code></pre></div><h3 id="ç€è‰²å™¨">ç€è‰²å™¨</h3>
<p><figure><a class="lightgallery" href="./shaders.svg" title="Shaders" data-thumbnail="./shaders.svg" data-sub-html="<h2>é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡æ®µç€è‰²å™¨</h2><p>Shaders</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./shaders.svg"
            data-srcset="./shaders.svg, ./shaders.svg 1.5x, ./shaders.svg 2x"
            data-sizes="auto"
            alt="./shaders.svg" />
    </a><figcaption class="image-caption">é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡æ®µç€è‰²å™¨</figcaption>
    </figure></p>
<p>ä¼´éšç€ WebGPU æ¥çš„è¿˜æœ‰ä¸€ä¸ªæ–°çš„ç€è‰²å™¨è¯­è¨€ï¼š <strong><ruby>WebGPU Shading Language<rt>WGSL</rt></ruby></strong>ã€‚</p>
<p>WebGPU ç€è‰²å™¨è¯­è¨€ç±»ä¼¼äºå…¶ä»–è¯­è¨€ï¼Œå¦‚ Rust ã€ Metal ç€è‰²å™¨è¯­è¨€å’Œ DirectX é«˜çº§ç€è‰²å™¨è¯­è¨€ï¼Œå…·æœ‰ JavaScript é£æ ¼çš„è£…é¥°å™¨ï¼Œ ä¾‹å¦‚ <code>@location(0)</code>ï¼Œ é‡‡ç”¨ <strong><ruby>è›‡å½¢å‘½åæ³•<rt>snake_case</rt></ruby></strong> çš„
<sup>å‡½æ•°</sup>/<sub>æˆå‘˜</sub>ï¼Œ
<strong><ruby>é©¼å³°å‘½åæ³•<rt>CamelCase</rt></ruby></strong>çš„ç»“æ„ä½“ï¼Œä»¥åŠå‡½æ•°éµå¾ª <code>fn my_func() -&gt; i32</code> çš„ Rust ä»£ç æ ¼å¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯é¡¶ç‚¹ç€è‰²å™¨çš„æºä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-wgsl" data-lang="wgsl"><span class="line"><span class="cl"><span class="k">struct</span><span class="w"> </span><span class="n">VSOut</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@builtin</span><span class="p">(</span><span class="nb">position</span><span class="p">)</span><span class="w"> </span><span class="n">nds_position</span><span class="p">:</span><span class="w"> </span><span class="nb">vec4</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@location</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">color</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@vertex</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">fn</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="nd">@location</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">in_pos</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nd">@location</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">in_color</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">VSOut</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">vs_out</span><span class="p">:</span><span class="w"> </span><span class="n">VSOut</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">vs_out</span><span class="p">.</span><span class="n">nds_position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">vec4</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">in_pos</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">vs_out</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inColor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">vsOut</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>ä»¥ä¸‹æ˜¯ç‰‡æ®µç€è‰²å™¨çš„æºä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-wgsl" data-lang="wgsl"><span class="line"><span class="cl"><span class="nd">@fragment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">fn</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="nd">@location</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">in_color</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nd">@location</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="nb">vec4</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">vec4</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">in_color</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><blockquote>
<p>ä½¿ç”¨åƒ <a href="https://github.com/gfx-rs/naga" target="_blank" rel="noopener noreffer ">Mozilla Naga</a> æˆ–è€… <a href="https://dawn.googlesource.com/tint/" target="_blank" rel="noopener noreffer ">Google Tint</a> è¿™æ ·çš„è½¬æ¢å™¨å¯ä»¥å°†å…¶ä»–ç€è‰²å™¨è¯­ï¼ˆä¾‹å¦‚ HLSL æˆ– GLSLï¼‰è½¬æ¢ä¸º WGSLï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹å¤æ‚ã€‚</p>
</blockquote>
<h3 id="ç€è‰²å™¨æ¨¡å—">ç€è‰²å™¨æ¨¡å—</h3>
<p><figure><a class="lightgallery" href="./shadermodules.svg" title="Shader Modules" data-thumbnail="./shadermodules.svg" data-sub-html="<h2>ç€è‰²å™¨æ¨¡å—</h2><p>Shader Modules</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./shadermodules.svg"
            data-srcset="./shadermodules.svg, ./shadermodules.svg 1.5x, ./shadermodules.svg 2x"
            data-sizes="auto"
            alt="./shadermodules.svg" />
    </a><figcaption class="image-caption">ç€è‰²å™¨æ¨¡å—</figcaption>
    </figure></p>
<p><strong>ç€è‰²å™¨æ¨¡å—</strong> æ˜¯ä¸€ç§æ™®é€šçš„æ–‡æœ¬ WGSL æ–‡ä»¶ï¼Œ åœ¨ GPU ä¸Šä½¿ç”¨ç»™å®šçš„å›¾å½¢ç®¡é“æ‰§è¡Œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// ğŸ“„ å¼•å…¥æˆ–è€…åœ¨è¡Œå†…å®šä¹‰æ‚¨çš„WGSLä»£ç :
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="nx">vertShaderCode</span> <span class="kr">from</span> <span class="s1">&#39;./shaders/triangle.vert.wgsl&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">fragShaderCode</span> <span class="kr">from</span> <span class="s1">&#39;./shaders/triangle.frag.wgsl&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰ç€è‰²å™¨æ¨¡å—å¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">vertModule</span>: <span class="kt">GPUShaderModule</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">fragModule</span>: <span class="kt">GPUShaderModule</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">vsmDesc</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">code</span>: <span class="kt">vertShaderCode</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">vertModule</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createShaderModule</span><span class="p">(</span><span class="nx">vsmDesc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fsmDesc</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">code</span>: <span class="kt">fragShaderCode</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">fragModule</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createShaderModule</span><span class="p">(</span><span class="nx">fsmDesc</span><span class="p">);</span>
</span></span></code></pre></div><h3 id="uniform-ç¼“å†²åŒº">Uniform ç¼“å†²åŒº</h3>
<p><figure><a class="lightgallery" href="./uniform-buffer.svg" title="Uniform Buffer" data-thumbnail="./uniform-buffer.svg" data-sub-html="<h2>Uniform ç¼“å†²åŒº</h2><p>Uniform Buffer</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./uniform-buffer.svg"
            data-srcset="./uniform-buffer.svg, ./uniform-buffer.svg 1.5x, ./uniform-buffer.svg 2x"
            data-sizes="auto"
            alt="./uniform-buffer.svg" />
    </a><figcaption class="image-caption">Uniform ç¼“å†²åŒº</figcaption>
    </figure></p>
<p>æ‚¨é€šå¸¸éœ€è¦ç›´æ¥å‘ç€è‰²å™¨æ¨¡å—æä¾›æ•°æ®ï¼Œå¹¶ä¸”ä¸ºæ­¤éœ€è¦æŒ‡å®šä¸€ä¸ªç»Ÿä¸€å˜é‡ã€‚è¦åœ¨ç€è‰²å™¨ä¸­åˆ›å»º Uniform ç¼“å†²åŒºï¼Œè¯·åœ¨ä¸»å‡½æ•°ä¹‹å‰å£°æ˜ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-wgsl" data-lang="wgsl"><span class="line"><span class="cl"><span class="k">struct</span><span class="w"> </span><span class="n">UBO</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">modelViewProj</span><span class="p">:</span><span class="w"> </span><span class="nb">mat4x4</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">primaryColor</span><span class="p">:</span><span class="w"> </span><span class="nb">vec4</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">accentColor</span><span class="p">:</span><span class="w"> </span><span class="nb">vec4</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="nd">@binding</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">var</span><span class="o">&lt;</span><span class="nb">uniform</span><span class="o">&gt;</span><span class="w"> </span><span class="n">uniforms</span><span class="p">:</span><span class="w"> </span><span class="n">UBO</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// â—åœ¨æ‚¨çš„é¡¶ç‚¹ç€è‰²å™¨çš„ä¸»æ–‡ä»¶ä¸­ ï¼Œ
</span></span></span><span class="line"><span class="cl"><span class="c1">// å°†å€’æ•°ç¬¬å››è¡Œæ›¿æ¢ä¸ºï¼š
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">vsOut</span><span class="p">.</span><span class="n">Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uniforms</span><span class="p">.</span><span class="n">modelViewProj</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">vec4</span><span class="o">&lt;</span><span class="nb">f32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">inPos</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><p>åœ¨æ‚¨çš„ JavaScript ä»£ç ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª Uniform ç¼“å†²åŒºï¼Œå°±åƒä½¿ç”¨<sup>ç´¢å¼•</sup>/<sub>é¡¶ç‚¹</sub>ç¼“å†²åŒºä¸€æ ·ã€‚</p>
<blockquote>
<p>ä¸ºäº†æ›´å¥½åœ°ç®¡ç†çº¿æ€§ä»£æ•°è®¡ç®—ï¼ˆä¾‹å¦‚çŸ©é˜µä¹˜æ³•ï¼‰ï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨åƒ <a href="https://github.com/toji/gl-matrix" target="_blank" rel="noopener noreffer ">gl-Matrix</a> è¿™æ ·çš„åº“ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// ğŸ‘” uniformæ•°æ® 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">uniformData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// â™Ÿï¸ æ¨¡å‹è§†å›¾æŠ•å½±çŸ©é˜µ (å•ä½çŸ©é˜µ)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">    <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">    <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">    <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ğŸ”´ ä¸»é¢œè‰² 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">1.0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ğŸŸ£ å¼ºè°ƒè‰² 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰ç¼“å†²åŒºå¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">uniformBuffer</span>: <span class="kt">GPUBuffer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">uniformBuffer</span> <span class="o">=</span> <span class="nx">createBuffer</span><span class="p">(</span><span class="nx">uniformData</span><span class="p">,</span> <span class="nx">GPUBufferUsage</span><span class="p">.</span><span class="nx">UNIFORM</span> <span class="o">|</span> <span class="nx">GPUBufferUsage</span><span class="p">.</span><span class="nx">COPY_DST</span><span class="p">);</span>
</span></span></code></pre></div><h3 id="ç®¡çº¿å¸ƒå±€">ç®¡çº¿å¸ƒå±€</h3>
<div id="id-4"><p><figure><a class="lightgallery" href="./pipeline-layout.svg" title="Pipeline Layout" data-thumbnail="./pipeline-layout.svg" data-sub-html="<h2>ç®¡çº¿å¸ƒå±€</h2><p>Pipeline Layout</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./pipeline-layout.svg"
            data-srcset="./pipeline-layout.svg, ./pipeline-layout.svg 1.5x, ./pipeline-layout.svg 2x"
            data-sizes="auto"
            alt="./pipeline-layout.svg" />
    </a><figcaption class="image-caption">ç®¡çº¿å¸ƒå±€</figcaption>
    </figure></p>
</div>
<blockquote>
<p>è¯‘è€…æ³¨ï¼š <strong>ç®¡çº¿å¸ƒå±€</strong>  æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç€è‰²å™¨é˜¶æ®µçš„èµ„æºç»‘å®šå¸ƒå±€æè¿°ï¼Œå®ƒå®šä¹‰äº†ç€è‰²å™¨éœ€è¦çš„èµ„æºå¦‚ä½•è¢«ç»‘å®šåˆ°ç®¡çº¿ä¸Šã€‚å®ƒåœ¨åˆ›å»ºæ¸²æŸ“ç®¡çº¿æ—¶è¢«æŒ‡å®šï¼Œç¡®ä¿ç€è‰²å™¨èƒ½å¤Ÿæ­£ç¡®åœ°è®¿é—®æ‰€éœ€çš„èµ„æºã€‚</p>
</blockquote>
<p>ä¸€æ—¦æ‚¨æœ‰äº†ä¸€ä¸ªç»Ÿä¸€çš„ uniform ï¼Œæ‚¨å°±å¯ä»¥åˆ›å»ºä¸€ä¸ª <strong>ç®¡çº¿å¸ƒå±€</strong> æ¥æè¿°åœ¨æ‰§è¡Œå›¾å½¢ç®¡çº¿æ—¶è¯¥ uniform çš„ä½ç½®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">bindGroupLayout</span>: <span class="kt">GPUBindGroupLayout</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">uniformBindGroup</span>: <span class="kt">GPUBindGroup</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ‘¨â€ğŸ”§ åˆ›å»ºæ‚¨çš„å›¾å½¢ç®¡çº¿...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ§™â€â™‚ï¸ è·å–æ‚¨çš„éšå¼ç®¡çº¿å¸ƒå±€:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">bindGroupLayout</span> <span class="o">=</span> <span class="nx">pipeline</span><span class="p">.</span><span class="nx">getBindGroupLayout</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ—„ï¸ ç»‘å®šç»„ 
</span></span></span><span class="line"><span class="cl"><span class="c1">// âœ è¿™å°†ç”¨äº *ç¼–ç æŒ‡ä»¤*
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">uniformBindGroup</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createBindGroup</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">layout</span>: <span class="kt">bindGroupLayout</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entries</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">binding</span>: <span class="kt">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">resource</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">buffer</span>: <span class="kt">uniformBuffer</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>æˆ–è€…æ‚¨äº‹å…ˆçŸ¥é“ä½ çš„å¸ƒå±€ï¼Œ ä½ å¯ä»¥è‡ªå·±åœ¨ç®¡çº¿åˆ›å»ºçš„æ—¶å€™åˆ›å»ºå¹¶ä½¿ç”¨å®ƒã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// âœ‹ å®šä¹‰å¥æŸ„ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">uniformBindGroupLayout</span>: <span class="kt">GPUBindGroupLayout</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">uniformBindGroup</span>: <span class="kt">GPUBindGroup</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">layout</span>: <span class="kt">GPUPipelineLayout</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ“ ç»‘å®šç»„layout 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">uniformBindGroupLayout</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createBindGroupLayout</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entries</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">binding</span>: <span class="kt">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">visibility</span>: <span class="kt">GPUShaderStage.VERTEX</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">buffer</span><span class="o">:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ—„ï¸ ç»‘å®šç»„ 
</span></span></span><span class="line"><span class="cl"><span class="c1">// âœ è¿™å°†ç”¨äº *ç¼–ç æŒ‡ä»¤*
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">uniformBindGroup</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createBindGroup</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">layout</span>: <span class="kt">uniformBindGroupLayout</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entries</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">binding</span>: <span class="kt">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">resource</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">buffer</span>: <span class="kt">uniformBuffer</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ—‚ï¸ Pipeline Layout
</span></span></span><span class="line"><span class="cl"><span class="c1">// ğŸ‘©â€ğŸ”§ è¿™å°†ç”¨ä½œ GPUPipelineDescriptor çš„æˆå‘˜ï¼Œåœ¨åˆ›å»ºç®¡çº¿çš„æ—¶å€™ä½¿ç”¨ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">pipelineLayoutDesc</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">bindGroupLayouts</span><span class="o">:</span> <span class="p">[</span><span class="nx">uniformBindGroupLayout</span><span class="p">]</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">layout</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createPipelineLayout</span><span class="p">(</span><span class="nx">pipelineLayoutDesc</span><span class="p">);</span>
</span></span></code></pre></div><p>å½“è¿›è¡ŒæŒ‡ä»¤ç¼–ç çš„æ—¶å€™ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>setBindGroup</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// âœ  åœ¨æ‚¨æŒ‡ä»¤ç¼–ç å:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">passEncoder</span><span class="p">.</span><span class="nx">setBindGroup</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">uniformBindGroup</span><span class="p">);</span>
</span></span></code></pre></div><h3 id="å›¾å½¢ç®¡çº¿">å›¾å½¢ç®¡çº¿</h3>
<div id="id-5"><p><figure><a class="lightgallery" href="./raster-pipeline.svg" title="Raster pipeline" data-thumbnail="./raster-pipeline.svg" data-sub-html="<h2>å›¾å½¢ç®¡çº¿</h2><p>Raster pipeline</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./raster-pipeline.svg"
            data-srcset="./raster-pipeline.svg, ./raster-pipeline.svg 1.5x, ./raster-pipeline.svg 2x"
            data-sizes="auto"
            alt="./raster-pipeline.svg" />
    </a><figcaption class="image-caption">å›¾å½¢ç®¡çº¿</figcaption>
    </figure></p>
</div>
<p><strong>å›¾å½¢ç®¡çº¿</strong> æè¿°äº†æ‰€æœ‰è¦è¾“å…¥åˆ°å…‰æ …ç»˜å›¾ç®¡çº¿æ‰§è¡Œä¸­çš„æ•°æ®ã€‚åŒ…æ‹¬ä»¥ä¸‹ï¼š</p>
<ul>
<li>ğŸ”£ <strong>è¾“å…¥ç»„ä»¶</strong> - æ¯ä¸ªé¡¶ç‚¹æ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿå“ªäº›å±æ€§åœ¨å“ªé‡Œï¼Œä»¥åŠä»–ä»¬åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å¯¹é½çš„ï¼Ÿ</li>
<li>ğŸ–ï¸ <strong>ç€è‰²å™¨æ¨¡å—</strong> - åœ¨æ‰§è¡Œæ­¤å›¾å½¢ç®¡çº¿çš„æ—¶å€™ï¼Œæ‚¨å°†ä½¿ç”¨å“ªäº›ç€è‰²å™¨æ¨¡å—ï¼Ÿ</li>
<li>âœï¸ <strong>Depth/Stencil State</strong> - æ‚¨åº”è¯¥æ‰§è¡Œæ·±åº¦æµ‹è¯•å—ï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨ä»€ä¹ˆå‡½æ•°æ¥æµ‹è¯•æ·±åº¦ï¼Ÿ</li>
<li>ğŸ¥ <strong>æ··åˆçŠ¶æ€</strong> - åœ¨å…ˆå‰çš„é¢œè‰²å’Œå½“å‰çš„é¢œè‰²ä¹‹é—´åº”è¯¥å¦‚ä½•æ··åˆé¢œè‰²ï¼Ÿ</li>
<li>ğŸ”º <strong>å…‰æ …åŒ–</strong> - åœ¨æ‰§è¡Œå›¾å½¢ç®¡çº¿æ—¶ï¼Œå…‰çº¤åŒ–å™¨çš„è¡Œä¸ºæ˜¯å¦‚ä½•çš„ï¼Ÿå®ƒæ˜¯å¦å‰”é™¤é¢ï¼Ÿåº”è¯¥å‰”é™¤å“ªä¸ªæ–¹å‘çš„é¢ï¼Ÿ</li>
<li>ğŸ’¾ <strong>Uniform æ•°æ®</strong> - æ‚¨çš„ç€è‰²å™¨åº”è¯¥éœ€è¦ä»€ä¹ˆæ ·æ ¼å¼çš„ç»Ÿä¸€æ•°æ®ï¼Ÿåœ¨ WebGPU ä¸­ï¼Œè¿™æ˜¯é€šè¿‡æè¿°ç®¡é“å¸ƒå±€æ¥å®ç°çš„ã€‚</li>
</ul>
<p>WebGPU ä¸ºå›¾å½¢ç®¡çº¿çŠ¶æ€æä¾›äº†åªèƒ½é»˜è®¤è®¾ç½®ï¼Œæ‰€ä»¥å¤§å¤šæ•°æ—¶å€™æ‚¨ç”šè‡³ä¸éœ€è¦è®¾ç½®å®ƒï¼Œä¸‹é¢æ˜¯ä¸€éƒ¨åˆ†ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// âœ‹ Declare pipeline handle
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">pipeline</span>: <span class="kt">GPURenderPipeline</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// âš—ï¸ Graphics Pipeline
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ”£ Input Assembly
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">positionAttribDesc</span>: <span class="kt">GPUVertexAttribute</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">shaderLocation</span>: <span class="kt">0</span><span class="p">,</span> <span class="c1">// @location(0)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">offset</span>: <span class="kt">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;float32x3&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">colorAttribDesc</span>: <span class="kt">GPUVertexAttribute</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">shaderLocation</span>: <span class="kt">1</span><span class="p">,</span> <span class="c1">// @location(1)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">offset</span>: <span class="kt">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;float32x3&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">positionBufferDesc</span>: <span class="kt">GPUVertexBufferLayout</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">attributes</span><span class="o">:</span> <span class="p">[</span><span class="nx">positionAttribDesc</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">arrayStride</span>: <span class="kt">4</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">// sizeof(float) * 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">stepMode</span><span class="o">:</span> <span class="s1">&#39;vertex&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">colorBufferDesc</span>: <span class="kt">GPUVertexBufferLayout</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">attributes</span><span class="o">:</span> <span class="p">[</span><span class="nx">colorAttribDesc</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">arrayStride</span>: <span class="kt">4</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">// sizeof(float) * 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">stepMode</span><span class="o">:</span> <span class="s1">&#39;vertex&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸŒ‘ Depth
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">depthStencil</span>: <span class="kt">GPUDepthStencilState</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">depthWriteEnabled</span>: <span class="kt">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">depthCompare</span><span class="o">:</span> <span class="s1">&#39;less&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;depth24plus-stencil8&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ¦„ Uniform Data
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">pipelineLayoutDesc</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">bindGroupLayouts</span><span class="o">:</span> <span class="p">[]</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">layout</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createPipelineLayout</span><span class="p">(</span><span class="nx">pipelineLayoutDesc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸ­ Shader Stages
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">vertex</span>: <span class="kt">GPUVertexState</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span>: <span class="kt">vertModule</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entryPoint</span><span class="o">:</span> <span class="s1">&#39;main&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">buffers</span><span class="o">:</span> <span class="p">[</span><span class="nx">positionBufferDesc</span><span class="p">,</span> <span class="nx">colorBufferDesc</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸŒ€ Color/Blend State
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">colorState</span>: <span class="kt">GPUColorTargetState</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;bgra8unorm&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fragment</span>: <span class="kt">GPUFragmentState</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span>: <span class="kt">fragModule</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entryPoint</span><span class="o">:</span> <span class="s1">&#39;main&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">targets</span><span class="o">:</span> <span class="p">[</span><span class="nx">colorState</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ğŸŸ¨ Rasterization
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">primitive</span>: <span class="kt">GPUPrimitiveState</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">frontFace</span><span class="o">:</span> <span class="s1">&#39;cw&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cullMode</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">topology</span><span class="o">:</span> <span class="s1">&#39;triangle-list&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">pipelineDesc</span>: <span class="kt">GPURenderPipelineDescriptor</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">layout</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">vertex</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fragment</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">primitive</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">depthStencil</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">pipeline</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createRenderPipeline</span><span class="p">(</span><span class="nx">pipelineDesc</span><span class="p">);</span>
</span></span></code></pre></div><h3 id="æŒ‡ä»¤ç¼–ç å™¨">æŒ‡ä»¤ç¼–ç å™¨</h3>
<div id="id-6"><p><figure><a class="lightgallery" href="./command-encoder.svg" title="Command Encoder" data-thumbnail="./command-encoder.svg" data-sub-html="<h2>æŒ‡ä»¤ç¼–ç å™¨</h2><p>Command Encoder</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./command-encoder.svg"
            data-srcset="./command-encoder.svg, ./command-encoder.svg 1.5x, ./command-encoder.svg 2x"
            data-sizes="auto"
            alt="./command-encoder.svg" />
    </a><figcaption class="image-caption">æŒ‡ä»¤ç¼–ç å™¨</figcaption>
    </figure></p>
</div>
<p><strong>æŒ‡ä»¤ç¼–ç å™¨</strong> ä¼šå°†æ‚¨æ‰“ç®—åœ¨ <strong>æ¸²æŸ“é€šé“ç¼–ç å™¨</strong> ç»„ä¸­æ‰§è¡Œçš„æ‰€æœ‰çš„ç»˜åˆ¶æŒ‡ä»¤è¿›è¡Œç¼–ç ã€‚ä¸€æ—¦å®Œæˆäº†æŒ‡ä»¤çš„ç¼–ç ï¼Œæ‚¨å°†æ”¶åˆ°ä¸€ä¸ªæŒ‡ä»¤ç¼“å†²åŒºï¼Œå¯ä»¥å°†å…¶æäº¤åˆ°é˜Ÿåˆ—ä¸­ã€‚</p>
<p>è¿™ä¸ªæ„ä¹‰åœ¨äºæŒ‡ä»¤ç¼“å†²åŒºç±»ä¼¼äºåœ¨ GPU æäº¤åˆ°é˜Ÿåˆ—åæ‰§è¡Œç»˜å›¾å‡½æ•°çš„ <em>å›è°ƒ</em>ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// âœ‹ Declare command handles
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">commandEncoder</span>: <span class="kt">GPUCommandEncoder</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">passEncoder</span>: <span class="kt">GPURenderPassEncoder</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// âœï¸ Write commands to send to the GPU
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">encodeCommands</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">colorAttachment</span>: <span class="kt">GPURenderPassColorAttachment</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">view</span>: <span class="kt">this.colorTextureView</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clearValue</span><span class="o">:</span> <span class="p">{</span> <span class="nx">r</span>: <span class="kt">0</span><span class="p">,</span> <span class="nx">g</span>: <span class="kt">0</span><span class="p">,</span> <span class="nx">b</span>: <span class="kt">0</span><span class="p">,</span> <span class="nx">a</span>: <span class="kt">1</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">loadOp</span><span class="o">:</span> <span class="s1">&#39;clear&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">storeOp</span><span class="o">:</span> <span class="s1">&#39;store&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">depthAttachment</span>: <span class="kt">GPURenderPassDepthStencilAttachment</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">view</span>: <span class="kt">this.depthTextureView</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">depthClearValue</span>: <span class="kt">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">depthLoadOp</span><span class="o">:</span> <span class="s1">&#39;clear&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">depthStoreOp</span><span class="o">:</span> <span class="s1">&#39;store&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">stencilClearValue</span>: <span class="kt">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">stencilLoadOp</span><span class="o">:</span> <span class="s1">&#39;clear&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">stencilStoreOp</span><span class="o">:</span> <span class="s1">&#39;store&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">renderPassDesc</span>: <span class="kt">GPURenderPassDescriptor</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">colorAttachments</span><span class="o">:</span> <span class="p">[</span><span class="nx">colorAttachment</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="nx">depthStencilAttachment</span>: <span class="kt">depthAttachment</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">commandEncoder</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><span class="nx">createCommandEncoder</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ğŸ–Œï¸ Encode drawing commands
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">passEncoder</span> <span class="o">=</span> <span class="nx">commandEncoder</span><span class="p">.</span><span class="nx">beginRenderPass</span><span class="p">(</span><span class="nx">renderPassDesc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">passEncoder</span><span class="p">.</span><span class="nx">setPipeline</span><span class="p">(</span><span class="nx">pipeline</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">passEncoder</span><span class="p">.</span><span class="nx">setViewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">passEncoder</span><span class="p">.</span><span class="nx">setScissorRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">passEncoder</span><span class="p">.</span><span class="nx">setVertexBuffer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">positionBuffer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">passEncoder</span><span class="p">.</span><span class="nx">setVertexBuffer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">colorBuffer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">passEncoder</span><span class="p">.</span><span class="nx">setIndexBuffer</span><span class="p">(</span><span class="nx">indexBuffer</span><span class="p">,</span> <span class="s1">&#39;uint16&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">passEncoder</span><span class="p">.</span><span class="nx">drawIndexed</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">passEncoder</span><span class="p">.</span><span class="nx">endPass</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">queue</span><span class="p">.</span><span class="nx">submit</span><span class="p">([</span><span class="nx">commandEncoder</span><span class="p">.</span><span class="nx">finish</span><span class="p">()]);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="æ¸²æŸ“">æ¸²æŸ“</h2>
<div id="id-7"><p><figure><a class="lightgallery" href="./triangle-raster.gif" title="Render" data-thumbnail="./triangle-raster.gif" data-sub-html="<h2>æ¸²æŸ“</h2><p>Render</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="./triangle-raster.gif"
            data-srcset="./triangle-raster.gif, ./triangle-raster.gif 1.5x, ./triangle-raster.gif 2x"
            data-sizes="auto"
            alt="./triangle-raster.gif" />
    </a><figcaption class="image-caption">æ¸²æŸ“</figcaption>
    </figure></p>
</div>
<p><strong>æ¸²æŸ“</strong> æ˜¯åœ¨ WebGPU ä¸­ç®€å•åœ°æ›´æ–°ä»»åŠ¡ä½ æ‰“ç®—æ›´æ–°çš„ uniformï¼Œ ä»ä½ çš„ä¸Šä¸‹æ–‡æˆ–è€…ä¸‹ä¸€ä¸ªé™„ä»¶ï¼Œæäº¤ä½ çš„æŒ‡ä»¤ç¼–ç å™¨ä»¥æ‰§è¡Œï¼Œç„¶åä½¿ç”¨ <code>requestAnimationFrame</code>  å›è°ƒå†æ¬¡æ‰§è¡Œæ‰€æœ‰è¿™äº›æ“ä½œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">render</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// â­ Acquire next image from context
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">colorTexture</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getCurrentTexture</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nx">colorTextureView</span> <span class="o">=</span> <span class="nx">colorTexture</span><span class="p">.</span><span class="nx">createView</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ğŸ“¦ Write and submit commands to queue
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">encodeCommands</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// â¿ Refresh canvas
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">render</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="ç»“æŸè¯­">ç»“æŸè¯­</h2>
<p><strong>WebGPU</strong> å¯èƒ½æ¯”å…¶ä»–å›¾å½¢ API æ›´éš¾ï¼Œä½†æ˜¯å®ƒçš„API <em>è®¾è®¡çš„ä¸ç°åœ¨æ˜¾å¡ç›¸ç»“åˆçš„æ›´ç´§å¯†</em>ï¼Œå› æ­¤ï¼Œä¸ä»…å¯ä»¥è®©åº”ç”¨ç¨‹åºæ›´å¿«ï¼Œå¹¶ä¸”æ›´é•¿æ•ˆã€‚</p>
<p>æœ‰äº›äº‹æƒ…ä½œè€…æ²¡æœ‰åœ¨è¿™ç¯‡æ–‡ç« ä¸­æ¶‰åŠï¼Œå› ä¸ºå®ƒä»¬è¶…å‡ºäº†è¿™ç¯‡æ–‡ç« çš„èŒƒå›´ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><strong>çŸ©é˜µ</strong> ä¸ç®¡æ˜¯ç”¨äºè§†è§’è¿˜æ˜¯åœºæ™¯ä¸­çš„ç‰©ä½“è½¬æ¢ã€‚ gl-Matrix æ˜¯ä¸€ç§æ— ä»·çš„èµ„æºã€‚</li>
<li><a href="" rel="">WebGPU ç±»å‹å®šä¹‰</a> è¯¦ç»†æ¦‚è¿°äº†ç»˜å›¾ç®¡çº¿çš„æ¯ç§å¯èƒ½çŠ¶æ€ï¼Œæ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚</li>
<li><strong>æ··åˆæ¨¡å¼</strong> <a href="https://www.andersriggelsen.dk/glblendfunc.php" target="_blank" rel="noopener noreffer ">Anders Riggelsen åœ¨è¿™é‡Œç¼–å†™äº†ä¸€ä¸ªå·¥å…·</a>ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ä»¥å¯è§†åŒ–çš„æ–¹å¼æŸ¥çœ‹ OpenGL æ··åˆæ¨¡å¼çš„è¡Œä¸ºã€‚</li>
<li><strong>è®¡ç®—ç®¡çº¿</strong> å¦‚æœæ‚¨æƒ³å°è¯•çš„åŒ–ï¼Œè¯·æŸ¥çœ‹ä¸‹é¢çš„è¯´æ˜æˆ–è€…ä¸€äº›ç¤ºä¾‹ã€‚</li>
<li><strong>åŠ è½½çº¹ç†</strong> è¿™å¯èƒ½æœ‰ç‚¹å¤æ‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹å¾ˆå¥½çš„ä»‹ç»äº†å¦‚ä½•åŠ è½½çº¹ç†ã€‚</li>
</ul>
<h3 id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº</h3>
<p>ä¸‹é¢æ˜¯ä¸€äº›å…³äº WebGPU çš„<sup>æ–‡ç« </sup>/<sub>é¡¹ç›®</sub>ï¼Œé¡ºåºä¸åˆ†å…ˆåï¼š</p>
<ul>
<li>William Usher (<a href="https://twitter.com/_wusher" target="_blank" rel="noopener noreffer ">@_wusher</a>)&rsquo;s article, updated for the Chrome 113 release of WebGPU: <a href="https://www.willusher.io/graphics/2023/04/10/0-to-gltf-triangle" target="_blank" rel="noopener noreffer ">From 0 to glTF with WebGPU</a>.</li>
<li><a href="https://github.com/kvark" target="_blank" rel="noopener noreffer ">Dzmitry Malyshau</a> wrote an article similar to this one <a href="https://hacks.mozilla.org/2020/04/experimental-webgpu-in-firefox/" target="_blank" rel="noopener noreffer ">introducing WebGPU in Mozilla FireFox</a>.</li>
<li><a href="https://metalbyexample.com/" target="_blank" rel="noopener noreffer ">Warren Moore</a> (<a href="https://twitter.com/warrenm" target="_blank" rel="noopener noreffer ">@warrenm</a>) wrote an article to help folks transition from the Metal API to <a href="https://metalbyexample.com/webgpu-part-one/" target="_blank" rel="noopener noreffer ">WebGPU</a>.</li>
<li><a href="https://blog.tojicode.com/" target="_blank" rel="noopener noreffer ">Brandon Jones</a> (<a href="https://twitter.com/Tojiro" target="_blank" rel="noopener noreffer ">@Tojiro</a>) wrote an article describing how to write a <a href="https://toji.github.io/webgpu-gltf-case-study/" target="_blank" rel="noopener noreffer ">GLTF renderer in WebGPU</a>.</li>
<li><a href="https://sotrh.github.io/learn-wgpu/#what-is-wgpu" target="_blank" rel="noopener noreffer ">Learn WGPU</a> is an introduction to writing WebGPU applications with Rust.</li>
<li><a href="https://eliemichel.github.io/LearnWebGPU/" target="_blank" rel="noopener noreffer ">Learn WebGPU</a> for native graphics in C++.</li>
</ul>
<p>è¿™æœ‰è®¸å¤šå¼€æºé¡¹ç›®ï¼š</p>
<ul>
<li><a href="http://austineng.github.io/" target="_blank" rel="noopener noreffer ">Austin Eng</a>&rsquo;s <a href="http://austin-eng.com/webgpu-samples/samples/texturedCube" target="_blank" rel="noopener noreffer ">WebGPU Samples</a></li>
<li><a href="http://tareksherif.net/" target="_blank" rel="noopener noreffer ">Tarek Sherif</a> (<a href="https://twitter.com/thsherif" target="_blank" rel="noopener noreffer ">@tsherif</a>)&rsquo;s <a href="https://github.com/tsherif/webgpu-examples" target="_blank" rel="noopener noreffer ">WebGPU Examples</a></li>
<li><a href="https://github.com/redcamel/RedGPU" target="_blank" rel="noopener noreffer ">RedGPU</a> by <a href="https://twitter.com/redcamel15" target="_blank" rel="noopener noreffer ">@RedCamel15</a>, a series of examples written for WebGPU.</li>
<li><a href="https://github.com/mrdoob/three.js/tree/dev/examples/jsm/renderers/webgpu" target="_blank" rel="noopener noreffer ">Three.js&rsquo; WebGPU Source</a></li>
<li><a href="https://github.com/BabylonJS/Babylon.js/blob/WebGPU/src/Engines/webgpuEngine.ts" target="_blank" rel="noopener noreffer ">BabylonJS&rsquo;s WebGPU Source</a></li>
<li><a href="https://github.com/gpuweb/types" target="_blank" rel="noopener noreffer ">WebGPU&rsquo;s Type Definitions</a></li>
<li><a href="https://github.com/gpuweb/cts" target="_blank" rel="noopener noreffer ">WebGPU&rsquo;s Conformance Tests</a></li>
<li><a href="https://dawn.googlesource.com/dawn" target="_blank" rel="noopener noreffer ">Dawn - A C++ Implementation of WebGPU</a> used to power Chromium&rsquo;s implementation of WebGPU. Carl Woffenden released a <a href="https://github.com/cwoffenden/hello-webgpu" target="_blank" rel="noopener noreffer ">Hello Triangle example with WebGPU and Dawn</a>.</li>
<li><a href="https://github.com/gfx-rs/wgpu-native" target="_blank" rel="noopener noreffer ">wgpu-native</a> is a native WebGPU implementation in Rust, which can easily be used in all sorts of native projects.</li>
</ul>
<p>WebGPU å’Œ WebGPU ç€è‰²å™¨è¯­è¨€çš„è§„èŒƒä¹Ÿå€¼å¾—çœ‹ä¸€çœ‹ï¼š</p>
<ul>
<li><a href="https://gpuweb.github.io/gpuweb/" target="_blank" rel="noopener noreffer ">WebGPU Specification</a></li>
<li><a href="https://gpuweb.github.io/gpuweb/wgsl/" target="_blank" rel="noopener noreffer ">WebGPU Shading Language (WGSL) Specification</a></li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2023-12-01</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/webgpu/">webgpu</a>,&nbsp;<a href="/tags/frontend/">frontend</a>,&nbsp;<a href="/tags/rust/">rust</a>,&nbsp;<a href="/tags/wgsl/">wgsl</a></section>
        <section class="post-button">
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/awesome-wm-virtualbox-full-screen/" class="prev" rel="prev" title="Awesome Wm Virtualbox Full Screen"><i class="fas fa-angle-left fa-fw"
                aria-hidden="true"></i>Awesome Wm Virtualbox Full Screen</a></div>
</div><div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.121.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2008 - 2023</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><link rel="stylesheet" href="/css/726bc0.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/object-fit-images@3.2.4/dist/ofi.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.5.1/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":50},"comment":{"valine":{"appId":"XIo8KShyg27BUQNLIDGqtjhj-gzGzoHsz","appKey":"6AGQbwYr9G7NhVKfqxiOnV4y","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-CN","pageSize":10,"placeholder":"Write something ...","recordIP":true,"visitor":true}},"data":{"id-1":"\n\u003ciframe height=\"480\" style=\"width: 100%;\" scrolling=\"no\" title=\"Raw WebGPU\" src=\"https://codepen.io/alaingalvan/embed/preview/GRgvLGw?height=480\u0026amp;theme-id=default\u0026amp;default-tab=result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\"\u003e\n  See the Pen \u003ca href='https://codepen.io/alaingalvan/pen/GRgvLGw\"'\u003eRaw WebGPU\u003c/a\u003e by Alain Galvan\n  (\u003ca href='https://codepen.io/alaingalvan\"'\u003e@alaingalvan\u003c/a\u003e) on \u003ca href='https://codepen.io\"'\u003eCodePen\u003c/a\u003e.\n\u003c/iframe\u003e\n","id-3":"\n\u003csvg width=\"100%\" height=\"100%\" viewBox=\"0 0 932 315\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\"\u003e\n    \u003cpath id=\"Triangle_1\" d=\"M154.8,220.055L56.4,49.619L253.2,49.619L154.8,220.055Z\" style=\"fill:#005a9c;fill-rule:nonzero;\"/\u003e\n    \u003cpath id=\"Triangle_2\" d=\"M252.3,49.619L203.048,134.633L301.548,134.633L252.3,49.619Z\" style=\"fill:#0066b0;fill-rule:nonzero;\"/\u003e\n    \u003cpath id=\"Triangle_3\" d=\"M252.3,219.646L203.048,134.633L301.548,134.633L252.3,219.646Z\" style=\"fill:#0076cc;fill-rule:nonzero;\"/\u003e\n    \u003cpath id=\"Triangle_4\" d=\"M301.349,135.041L276.621,92.535L326.077,92.535L301.349,135.041Z\" style=\"fill:#0086e8;fill-rule:nonzero;\"/\u003e\n    \u003cpath id=\"Triangle_5\" d=\"M301.349,50.028L276.621,92.535L326.077,92.535L301.349,50.028Z\" style=\"fill:#0093ff;fill-rule:nonzero;\"/\u003e\n    \u003cpath id=\"ebGPU\" d=\"M397.927,170C398.055,162.128 396.176,154.351 392.468,147.406C388.885,140.802 383.494,135.354 376.929,131.7C369.836,127.799 361.841,125.829 353.747,125.989C345.455,125.825 337.262,127.825 329.977,131.789C323.126,135.616 317.548,141.37 313.935,148.336C310.126,155.504 308.222,163.847 308.223,173.365C308.224,182.883 310.184,191.254 314.103,198.479C317.805,205.479 323.43,211.279 330.313,215.193C337.469,219.183 345.555,221.211 353.747,221.073C364.721,221.073 373.904,218.301 381.297,212.758C388.528,207.448 393.742,199.833 396.079,191.172L379.617,191.172C377.927,196.187 374.655,200.521 370.294,203.519C365.868,206.6 360.352,208.139 353.747,208.138C346.165,208.317 338.796,205.58 333.169,200.495C327.513,195.4 324.405,188.317 323.846,179.245L397.423,179.245C397.748,176.176 397.915,173.092 397.923,170.006L397.927,170ZM382.138,166.808L324.014,166.808C324.796,158.075 327.904,151.243 333.337,146.314C338.719,141.406 345.793,138.757 353.075,138.923C358.163,138.858 363.196,139.979 367.775,142.198C372.122,144.314 375.769,147.639 378.275,151.773C380.943,156.324 382.282,161.534 382.138,166.808ZM433.371,144.634L433.371,95.246L418.084,95.246L418.084,219.554L433.371,219.554L433.371,202.588C436.589,208.157 441.265,212.746 446.894,215.858C453.275,219.43 460.497,221.229 467.808,221.066C483.797,221.286 498.571,212.329 505.772,198.052C509.677,190.356 511.639,181.819 511.484,173.19C511.484,163.783 509.58,155.524 505.772,148.413C502.202,141.555 496.792,135.824 490.15,131.866C483.38,127.904 475.652,125.87 467.808,125.987C460.581,125.86 453.449,127.657 447.146,131.194C441.425,134.346 436.664,138.991 433.371,144.633L433.371,144.634ZM495.861,173.191C496.017,179.578 494.573,185.904 491.661,191.591C489.088,196.56 485.155,200.697 480.323,203.518C475.548,206.266 470.125,207.687 464.616,207.633C459.162,207.673 453.796,206.252 449.077,203.518C444.232,200.686 440.274,196.554 437.655,191.591C431.947,180.179 431.947,166.718 437.655,155.306C440.275,150.343 444.232,146.211 449.077,143.379C453.797,140.646 459.162,139.225 464.616,139.264C470.114,139.209 475.531,140.599 480.323,143.295C485.147,146.052 489.082,150.133 491.661,155.054C494.566,160.651 496.011,166.892 495.861,173.196L495.861,173.191ZM638.647,136.4C634.672,125.691 627.332,116.553 617.733,110.362C608.158,104.205 597.155,101.125 584.724,101.123C574.314,101.007 564.055,103.644 554.991,108.766C546.092,113.802 538.742,121.181 533.741,130.1C528.462,139.505 525.766,150.142 525.929,160.926C525.759,171.684 528.455,182.296 533.741,191.667C538.76,200.55 546.108,207.898 554.991,212.917C564.054,218.041 574.313,220.678 584.724,220.56C594.518,220.687 604.182,218.286 612.777,213.589C621.038,209.07 628.028,202.541 633.1,194.608C638.23,186.658 641.344,177.576 642.171,168.151L642.171,156.392L579.181,156.392L579.181,168.823L625.881,168.823C624.648,180.471 620.337,189.71 612.946,196.54C605.555,203.37 596.148,206.786 584.725,206.787C576.994,206.902 569.369,204.96 562.635,201.16C556.064,197.39 550.703,191.824 547.181,185.117C543.427,178.175 541.551,170.112 541.553,160.928C541.555,151.744 543.431,143.653 547.181,136.654C550.686,129.913 556.05,124.316 562.635,120.527C569.369,116.728 576.994,114.786 584.725,114.9C592.275,114.735 599.723,116.685 606.225,120.527C612.4,124.299 617.314,129.826 620.337,136.4L638.647,136.4ZM740.614,136.736C740.614,126.657 737.17,118.426 730.282,112.042C723.394,105.658 713.343,102.466 700.129,102.467L662.329,102.467L662.329,219.554L677.615,219.554L677.615,170.671L700.125,170.671C713.787,170.671 723.95,167.451 730.614,161.012C737.278,154.573 740.611,146.481 740.614,136.738L740.614,136.736ZM700.129,158.07L677.619,158.07L677.619,115.07L700.129,115.07C716.702,115.07 724.989,122.293 724.991,136.74C724.991,143.572 722.975,148.835 718.944,152.53C714.913,156.225 708.641,158.073 700.129,158.074L700.129,158.07ZM759.259,102.469L759.259,176.383C759.259,186.126 761.191,194.329 765.054,200.993C768.684,207.437 774.194,212.624 780.845,215.859C795.082,222.351 811.46,222.351 825.697,215.859C832.36,212.611 837.893,207.429 841.571,200.993C845.49,194.331 847.45,186.128 847.451,176.383L847.451,102.469L832.164,102.469L832.164,176.55C832.164,186.965 829.616,194.693 824.521,199.732C819.426,204.771 812.398,207.291 803.439,207.291C794.368,207.291 787.285,204.771 782.189,199.732C777.093,194.693 774.545,186.965 774.546,176.55L774.546,102.469L759.259,102.469Z\" style=\"fill:currentColor;fill-rule:nonzero;\"/\u003e\n\u003c/svg\u003e\n","id-8":"Boiao Ch's Blog","id-9":"Boiao Ch's Blog"},"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":30,"type":"lunr"},"twemoji":true,"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-8":["id-8"],"id-9":["id-9"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
